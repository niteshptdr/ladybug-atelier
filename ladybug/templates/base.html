<!DOCTYPE html>
<html lang="en">
    {% load static %}
    {% load static tailwind_tags %}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Ladybug{% endblock %}</title>
            {% tailwind_css %}
    <!-- Link to Tailwind CSS via CDN -->
    <!-- <script src="https://cdn.tailwindcss.com"></script> -->
    <!-- <link rel="stylesheet" href="{% static 'css/style.css' %}"> -->
    <!-- <link rel="stylesheet" href="{% static 'css/font_min.css' %}"> -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <!-- <script src='https://cdn.plot.ly/plotly-2.26.0.min.js'></script> -->
    <!-- <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
     -->
    <!-- <script src="{% static 'map.js' %}"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

    <script>
        // Function to toggle the mobile menu
        // function toggleMenu() {
        //     const menu = document.getElementById('mobile-menu');
        //     menu.classList.toggle('hidden');
        // }

        
        function toggleMenu() {
            const mobileMenu = document.getElementById('mobile-menu');
            if (mobileMenu.classList.contains('hidden')) {
                mobileMenu.classList.remove('hidden');
                setTimeout(() => mobileMenu.classList.replace('opacity-0', 'opacity-100'), 10);
                setTimeout(() => mobileMenu.classList.replace('scale-95', 'scale-100'), 10);
            } else {
                mobileMenu.classList.replace('opacity-100', 'opacity-0');
                mobileMenu.classList.replace('scale-100', 'scale-95');
                setTimeout(() => mobileMenu.classList.add('hidden'), 300);
            }
        }


        let lastScrollTop = 0;
        
        window.addEventListener("scroll", function () {
            const currentScroll = window.pageYOffset || document.documentElement.scrollTop;

            if (currentScroll > lastScrollTop) {
                // User is scrolling down
                const mobileMenu = document.getElementById('mobile-menu');
    
                if (!mobileMenu.classList.contains('hidden')) {
                    // Hide the mobile menu with animation
                    
                    mobileMenu.classList.replace('opacity-100', 'opacity-0');
                    mobileMenu.classList.replace('scale-100', 'scale-95');
                    setTimeout(() => mobileMenu.classList.add('hidden'), 300);
                }
            }
            lastScrollTop = currentScroll <= 0 ? 0 : currentScroll; // Avoid negative scroll
        }, false);

    </script>

<script>
    window.onscroll = function() {
        let navbar = document.getElementById('navbar');
        if (window.scrollY > 50) {
            // navbar.classList.add('bg-blue-800');
            // navbar.classList.remove('bg-gradient-to-r');
        } else {
            // navbar.classList.remove('bg-blue-800');
            // navbar.classList.add('bg-gradient-to-r');
        }
    }
</script>

{% block extra_css %}{% endblock %}
</head>

<body class="bg-gray-100 text-gray-900 opacity-0 animate-fadeIn">
    <style>

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        .animate-fadeIn {
            animation: fadeIn 1s ease-out forwards;
        }


        @keyframes fadeOut {
        0% { opacity: 1; }
        100% { opacity: 0; visibility: hidden; }
            }

            #messageBox {
                animation: fadeOut 3s ease-in-out 4s forwards;
            }

        @keyframes blink {
            50% { opacity: 0; }
        }

        .blink {
            animation: blink 1s infinite;
        }

        button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
            opacity: 0.6;
        }


        .product-image-wrapper {
            position: relative;
            overflow: hidden;
        }
        .hover-image {
            position: absolute;
            top: 0;
            left: 0;
            transition: opacity 0.3s ease-in-out;
            opacity: 0;
        }
        .product-image-wrapper:hover .hover-image {
            opacity: 1;
        }
        
    </style>
    
    <!-- Navbar Section -->
    
    <nav class="{% block navbar_class %} bg-gray-200 py-0 px-0 shadow-lg{% endblock %}">
        
        <div class="container max-w-full flex items-center justify-start">
            <!-- Mobile Menu Button -->
            <button class="text-slate-700 lg:hidden focus:outline-none ms-6" onclick="toggleMenu()">
                <i class="fas fa-bars text-xl"></i>
            </button>

            <!-- Logo Section -->
            <a href="{% url 'home' %}" class="flex items-center justify-start sm:justify-start ms-2">
            <img src="{% static 'images/Ladybug_trns.png' %}" alt="Logo" class="h-10 sm:h-10 ms-4 rounded p-2 {% block logo_bg %}{% endblock %}">
            </a>

            <!-- Navigation Links (Desktop) -->
            <ul class="hidden lg:flex space-x-4 text-slate-700 ms-4">
                <!-- <li><a href="{% url 'home' %}" class="hover:text-rose-800 font-semibold transition duration-300 ease-in-out"> <i class="fas fa-home mr-2"></i> Home</a></li> -->

                    <!-- {% if user.is_authenticated %}
                    {% with user.profile as profile %} -->

                    <!-- <li>
                        <a href="" class="hover:text-rose-800 font-semibold transition duration-300 ease-in-out">
                            | {{ profile.name }}
                        </a>
                    </li> -->
                    <!-- <li class="relative">
                        
                        <button id="desktop-account-toggle" class="hover:text-rose-800 focus:outline-none">
                            <i class="fas fa-user mr-2"></i> {{ profile.name }}
                            <i class="fas fa-chevron-down ml-1 transition-transform duration-300" id="desktop-account-chevron"></i>
                        </button>

                        
                        <ul id="desktop-account-submenu" class="hidden absolute right-0 mt-2 w-48 bg-white shadow-lg rounded-md border z-50 text-sm transition-all duration-300 py-2">
                            <li><a href="{% url 'cart' %}" class="block px-4 py-2 hover:bg-rose-100 hover:text-rose-800"><i class="fas fa-shopping-cart mr-2"></i>Cart</a></li>
                            <li><a href="{% url 'orders' %}" class="block px-4 py-2 hover:bg-rose-100 hover:text-rose-800"><i class="fas fa-box mr-2"></i>Orders</a></li>
                            <li><a href="{% url 'logout' %}" class="block px-4 py-2 hover:bg-rose-100 hover:text-rose-800"><i class="fas fa-sign-out-alt mr-2"></i>Logout</a></li>
                        </ul>
                    </li> -->

                    <!-- {% endwith %} -->

                        <!-- <li class="block">
                            
                        {% else %}
                            <a href="{% url 'login' %}" class="hover:text-rose-800 font-semibold"> <i class="fas fa-sign-in-alt mr-2"></i>Login</a>
                        {% endif %}
                        </li> -->

            </ul>
        </div>
        <!-- Mobile Menu Links -->
        <ul id="mobile-menu" class="hidden bg-white text-slate-800 shadow-sm font-semibold p-4 space-y-2 lg:hidden w-auto text-left fixed left-2 z-50 transition-all duration-300 ease-in-out fixed top-16 left-2 z-50 rounded-xl transform opacity-0 scale-95">
            <!-- <li><a href="{% url 'home' %}" class="block hover:text-rose-800"> <i class="fas fa-home mr-2"></i> Home</a></li> -->
            
                    <!-- {% if user.is_authenticated %}
                    {% with user.profile as profile %} -->

                    <!-- <li>
                       
                        <button id="account-toggle" class="flex items-center w-full hover:text-rose-800 focus:outline-none">
                            <i class="fas fa-user mr-2"></i> {{ profile.name }}
                            <i class="px-2 fas fa-chevron-down ml-auto transition-transform duration-300" id="account-chevron"></i>
                        </button>
                        <ul id="account-submenu" class="hidden pl-6 space-y-2 text-sm transition-all duration-300">
                            <li><a href="{% url 'cart' %}" class="block hover:text-rose-800"><i class="fas fa-shopping-cart mr-2"></i>Cart</a></li>
                            <li><a href="{% url 'orders' %}" class="block hover:text-rose-800"><i class="fas fa-box mr-2"></i>Orders</a></li>
                            <li><a href="{% url 'logout' %}" class="block hover:text-rose-800"><i class="fas fa-sign-out-alt mr-2"></i>Logout</a></li>
                        </ul>
                    </li> -->

                    <!-- {% endwith %} -->

                        <!-- <li class="block">
                            
                        {% else %}
                            <a href="{% url 'login' %}" class="hover:text-rose-800"> <i class="fas fa-sign-in-alt mr-2"></i> Login</a>
                        
                        </li> -->

                    <!-- {% endif %} -->

        </ul>

    </nav>

    <!-- Content Section -->
    <main class="ms-0 me-0">
        {% block content %}
        <!-- Page-specific content will go here -->
        {% endblock %}
    </main>

    <!-- Footer Section -->
    <footer class="bg-gray-800 text-white py-4 mt-auto">
        <div class="max-w-7xl mx-auto text-center">
            <p>&copy; 2025 Ladybug Atelier. All rights reserved.</p>
            <p>Developed and Hosted by Ladybug Atelier, India</p>
        </div>
    </footer>

        <!-- Global Image Modal -->
        <div id="imageModal" class="fixed inset-0 z-50 hidden bg-black bg-opacity-80 flex items-center justify-center">
        <div class="relative aspect-w-1 aspect-h-1 px-4">
            <img id="modalImage" src="" alt="Preview" class="w-full h-auto max-h-[90vh] rounded-lg shadow-lg border-4 border-white" />
            <button
            onclick="closeImageModal()"
            class="absolute top-2 right-2 text-white bg-black bg-opacity-70 hover:bg-opacity-90 rounded-full px-3 py-1 text-xl"
            >âœ•</button>
        </div>
        </div>


        <script>
        function openImageModal(src) {
            const modal = document.getElementById('imageModal');
            const img = document.getElementById('modalImage');
            img.src = src;
            modal.classList.remove('hidden');
        }

        function closeImageModal() {
            document.getElementById('imageModal').classList.add('hidden');
        }

        // Optional: Close modal on ESC key
        document.addEventListener('keydown', function (e) {
            if (e.key === 'Escape') closeImageModal();
        });



        const accountToggle = document.getElementById('account-toggle');
        const submenu = document.getElementById('account-submenu');
        const chevron = document.getElementById('account-chevron');

        if (accountToggle) {
            accountToggle.addEventListener('click', () => {
                submenu.classList.toggle('hidden');
                chevron.classList.toggle('rotate-180');
            });
        }

        const desktopAccountToggle = document.getElementById('desktop-account-toggle');
        const desktopSubmenu = document.getElementById('desktop-account-submenu');
        const desktopChevron = document.getElementById('desktop-account-chevron');

        if (desktopAccountToggle) {
            desktopAccountToggle.addEventListener('click', () => {
                desktopSubmenu.classList.toggle('hidden');
                desktopChevron.classList.toggle('rotate-180');
            });
        }


        </script>


</body>
</html>
